function deleteInput(e){document.getElementById(e).remove()}function requestData(e,t){$.ajax({url:data_url,data:"data_type=gender&offset="+e+"&count="+t,success:function(e){total=e.totaldata,total_offset+=t,"undefined"!=typeof e.datapoints[0].gender&&e.datapoints.forEach(function(e){createGender(-1,e.pk,e.last_changed,e.committee,e.gender),total_displayed++}),new_gender===!1&&("undefined"!=typeof e.datapoints[0].pk&&(latest_pk=e.datapoints[0].pk),requestNewData("point"),new_gender=!0)},cache:!1})}function requestNewData(e){var t=latest_pk;$.ajax({url:data_latest_url,data:"data_type=gender&pk="+t,success:function(t){"undefined"!=typeof t.datapoints[0].pk&&(latest_pk=t.datapoints[0].pk),total=t.totaldata,"undefined"!=typeof t.datapoints[0].gender&&t.datapoints.forEach(function(e){total_offset++,createGender(0,e.pk,e.last_changed,e.committee,e.gender),total_displayed++}),setTimeout(requestNewData,3e3,e)},cache:!1})}function createGender(e,t,n,a,o){var r=document.getElementById("gender-table").getElementsByTagName("tbody")[0],s=r.insertRow(e),i=s.insertCell(0),l=s.insertCell(1),d=s.insertCell(2),c=s.insertCell(3),u=s.insertCell(4);$(s).attr("id","gender-"+t),$(s).css("display","none"),i.innerHTML=t,l.innerHTML=n,d.innerHTML=a,c.innerHTML=o,u.innerHTML='<a href="javascript:void(0)" class="btn btn-danger btn-xs btn-raised" onclick="deleteData(\'gender\', \''+t+'\')" ><i class="material-icons" style="font-size: 18px">delete</i></a>',$(s).fadeIn("slow")}function deleteData(e,t){confirm("Are you sure you want to delete this?")===!0&&$.ajax({url:data_pk_url,type:"POST",data:{"delete":!0,"data-type":e,pk:t},success:function(n){console.log("Delete success!"),deleteInput(e+"-"+t)},error:function(e,t,n){$("#results").html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+t+" <a href='#' class='close'>&times;</a></div>"),console.log(e.status+": "+e.responseText)},cache:!1})}function getCookie(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=jQuery.trim(n[a]);if(o.substring(0,e.length+1)==e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}function csrfSafeMethod(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function sameOrigin(e){var t=document.location.host,n=document.location.protocol,a="//"+t,o=n+a;return e==o||e.slice(0,o.length+1)==o+"/"||e==a||e.slice(0,a.length+1)==a+"/"||!/^(\/\/|http:|https:).*/.test(e)}var total_offset=0,total,total_displayed=0,latest_pk=0,new_gender=!1;Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=this.length-1;e>=0;e--)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},jQuery(function($){$("#gender-div").bind("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&total>total_displayed&&requestData(total_offset,10)})});var csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(e,t){!csrfSafeMethod(t.type)&&sameOrigin(t.url)&&e.setRequestHeader("X-CSRFToken",csrftoken)}});