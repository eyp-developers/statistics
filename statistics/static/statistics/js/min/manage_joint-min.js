function requestData(t,e,n){$.ajax({url:data_url,data:"data_type="+t+"&offset="+e+"&count="+n,success:function(e){"point"===t?("undefined"!=typeof e.datapoints[0].pk&&(latest_point_pk=e.datapoints[0].pk),total_point=e.totaldata,offset_point+=n,"undefined"!=typeof e.datapoints[0].committee_by&&e.datapoints.forEach(function(t){createPoint(t.pk,t.last_changed,t.committee_by,t.active_debate,t.round_no,t.point_type,t.subtopics,t.committee_color,t.committee_text_color)})):"content"===t?("undefined"!=typeof e.datapoints[0].pk&&(latest_content_pk=e.datapoints[0].pk),total_content=e.totaldata,offset_content+=n,"undefined"!=typeof e.datapoints[0].content&&e.datapoints.forEach(function(t){createContent(t.pk,t.last_changed,t.committee_by,t.active_debate,t.content,t.point_type,t.committee_color,t.committee_text_color)})):"vote"===t&&("undefined"!=typeof e.datapoints[0].pk&&(latest_vote_pk=e.datapoints[0].pk),total_vote=e.totaldata,offset_vote+=n,"undefined"!=typeof e.datapoints[0].committee_by&&e.datapoints.forEach(function(t){createVote(t.pk,t.last_changed,t.committee_by,t.active_debate,t.in_favour,t.against,t.abstentions,t.absent,t.committee_color,t.committee_text_color)}))},cache:!1})}function createPoint(t,e,n,a,o,i,d,s,l){var c=document.getElementById("point-table").getElementsByTagName("tbody")[0],r=c.insertRow(0),_=r.insertCell(0),p=r.insertCell(1),m=r.insertCell(2),b=r.insertCell(3),v=r.insertCell(4),u=r.insertCell(5),f=r.insertCell(6),g=r.insertCell(7);$(r).attr("id","point-"+t),$(r).css("display","none"),_.innerHTML=t,p.innerHTML=e,m.innerHTML=n,b.innerHTML=a,v.innerHTML=o,"P"===i?u.innerHTML='<img src="'+point_img+'" height="30" >':u.innerHTML='<img src="'+dr_img+'" height="30" >',f.innerHTML=d,g.innerHTML='<a href="javascript:void(0)" class="btn btn-xs btn-material-'+session_color+'-800 btn-fab btn-raised mdi-content-create" data-toggle="modal" data-target="#edit-point" onclick="editPoint(\''+t+'\')" ></a><a href="javascript:void(0)" class="btn btn-danger btn-fab btn-raised mdi-action-delete" onclick="" ></a>',$(m).addClass("label-material-"+s+"-400"),$(m).css("color",l),$(r).fadeIn("slow")}function createContent(t,e,n,a,o,i,d,s){var l=document.getElementById("content-table").getElementsByTagName("tbody")[0],c=l.insertRow(0),r=c.insertCell(0),_=c.insertCell(1),p=c.insertCell(2),m=c.insertCell(3),b=c.insertCell(4),v=c.insertCell(5),u=c.insertCell(6);$(c).attr("id","content-"+t),$(c).css("display","none"),r.innerHTML=t,_.innerHTML=e,p.innerHTML=n,m.innerHTML=a,b.innerHTML=o,"P"===i?v.innerHTML='<img src="'+point_img+'" height="30" >':v.innerHTML='<img src="'+dr_img+'" height="30" >',u.innerHTML='<a href="javascript:void(0)" class="btn btn-xs btn-material-'+session_color+'-800 btn-fab btn-raised mdi-content-create" data-toggle="modal" data-target="#edit-content" onclick="editContent(\''+t+'\')" ></a><a href="javascript:void(0)" class="btn btn-danger btn-fab btn-raised mdi-action-delete" onclick="" ></a>',$(p).addClass("label-material-"+d+"-400"),$(p).css("color",s),$(c).fadeIn("slow")}function createVote(t,e,n,a,o,i,d,s,l,c){var r=document.getElementById("vote-table").getElementsByTagName("tbody")[0],_=r.insertRow(0),p=_.insertCell(0),m=_.insertCell(1),b=_.insertCell(2),v=_.insertCell(3),u=_.insertCell(4),f=_.insertCell(5),g=_.insertCell(6),y=_.insertCell(7);vote_action=_.insertCell(8),$(_).attr("id","vote-"+t),$(_).css("display","none"),p.innerHTML=t,m.innerHTML=e,b.innerHTML=n,v.innerHTML=a,u.innerHTML=o,f.innerHTML=i,g.innerHTML=d,y.innerHTML=s,vote_action.innerHTML='<a href="javascript:void(0)" class="btn btn-xs btn-material-'+session_color+'-800 btn-fab btn-raised mdi-content-create" data-toggle="modal" data-target="#edit-vote" onclick="editVote(\''+t+'\')" ></a><a href="javascript:void(0)" class="btn btn-danger btn-fab btn-raised mdi-action-delete" onclick="" ></a>',$(b).addClass("label-material-"+l+"-400"),$(b).css("color",c),$(_).fadeIn("slow")}function editPoint(t){var e="data_type=point&pk="+t;$.ajax({url:data_pk_url,data:e,success:function(t){$("#point_id_pk").val(t.pk),document.getElementById("point_id_committee").options.namedItem(t.committee_by).selected=!0,document.getElementById("point_id_debate").options.namedItem(t.active_debate).selected=!0,document.getElementById("point_id_round_no").options.namedItem(t.round_no).selected=!0,document.getElementById("point_id_point_type").options.namedItem(t.point_type).selected=!0;for(var e=document.getElementById("point_id_subtopics"),n=0;e.options.length>0;)e.options.remove(0);t.all_subtopics.forEach(function(t){var a=document.createElement("option");a.text=t.subtopic,$(a).attr("id",t.pk),e.options.add(a,n),n++}),t.subtopics.forEach(function(t){e.options.namedItem(t.pk).selected=!0})},cache:!1})}function editContent(t){var e="data_type=content&pk="+t;$.ajax({url:data_pk_url,data:e,success:function(t){$("#content_id_pk").val(t.pk),$("#content_id_content").val(t.content),document.getElementById("content_id_committee").options.namedItem(t.committee_by).selected=!0,document.getElementById("content_id_debate").options.namedItem(t.active_debate).selected=!0,document.getElementById("content_id_point_type").options.namedItem(t.point_type).selected=!0},cache:!1})}function editVote(t){var e="data_type=vote&pk="+t;$.ajax({url:data_pk_url,data:e,success:function(t){$("#vote_id_pk").val(t.pk),$("#vote_id_in_favour").val(t.in_favour),$("#vote_id_against").val(t.against),$("#vote_id_abstentions").val(t.abstentions),$("#vote_id_absent").val(t.absent),document.getElementById("vote_id_committee").options.namedItem(t.committee_by).selected=!0,document.getElementById("vote_id_debate").options.namedItem(t.active_debate).selected=!0},cache:!1})}function getTotal(){var t=$("#vote_id_in_favour"),e=$("#vote_id_against"),n=$("#vote_id_abstentions"),a=$("#vote_id_absent");total=parseInt(t.val())+parseInt(e.val())+parseInt(n.val())+parseInt(a.val()),$("#vote-total").html(total)}var offset_point=0,offset_content=0,total_point,total_content,total_points_displayed=0,total_content_displayed=0,latest_point_pk=0,latest_content_pk=0,offset_vote=0,total_vote,total_votes_displayed=0,latest_vote_pk=0;$("input").keyup(getTotal),$(document).ready(getTotal),requestData("point",0,10),requestData("content",0,10),requestData("vote",0,10);