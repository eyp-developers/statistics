function addInput(t){var e=document.createElement("div");e.setAttribute("id","subtopic-div-"+counter_subtopics),e.innerHTML='<label class="control-label col-sm-2" for="inputLarge"></label><div class="col-sm-8"><input type="hidden" name="subtopic_pk[]" id="subtopic-pk-'+counter_subtopics+'" value=""><input class="form-control input-sm" type="text" name="subtopic[]" id="subtopic-'+counter_subtopics+'" value=""></div><div class="col-sm-2"><span class="input-group-btn"><button class="btn btn-primary btn-material-'+session_color+'-800 btn-sm" type="button" onclick="deleteInput(\'subtopic-div-'+counter_subtopics+"')\">Delete</button></span></div>",document.getElementById(t).appendChild(e),counter_subtopics++}function deleteInput(t){document.getElementById(t).remove()}function submit_committee(){var t=1,e=1,o=2,n=[];for(console.log("create post is working!"),console.log($("#id_pk").val()),console.log($("#id_name").val()),console.log($("#id_topic").val());counter_subtopics>=t;)void 0!=$("#subtopic-"+t).val()&&(console.log($("#subtopic-"+t).val()),n.push({pk:$("#subtopic-pk-"+t).val(),subtopic:$("#subtopic-"+t).val()})),t++;console.log(n),$.ajax({url:committee_post_url,type:"POST",data:{pk:$("#id_pk").val(),name:$("#id_name").val(),topic:$("#id_topic").val(),subtopics:JSON.stringify(n)},success:function(t){var i=table.insertRow(0),s=i.insertCell(0),c=i.insertCell(1),l=i.insertCell(2),r=i.insertCell(3),a=i.insertCell(4);for(s.innerHTML=$("#id_pk").val(),c.innerHTML=$("#id_name").val(),l.innerHTML=$("#id_topic").val(),r.innerHTML=n.toString(),a.innerHTML='<a href="javascript:void(0)" class="btn btn-primary btn-material-'+session_color+'-800 btn-xs" onclick="" ><span class="mdi-content-create" style="font-size: 10px; margin-right: 4px;"></span>Edit</a><a href="javascript:void(0)" class="btn btn-primary btn-danger btn-xs" onclick="" >Delete</a>',$(i).css("display","none"),$(i).fadeIn("slow"),$("#id_pk").val(""),$("#id_name").val(""),$("#id_topic").val("");counter_subtopics>=e;)void 0!=$("#subtopic-"+e).val()&&($("#subtopic-"+e).val(""),$("#subtopic-pk-"+e).val("")),e++;for(;counter_subtopics>o;)0!=$("#subtopic-div-"+o).length&&deleteInput("subtopic-div-"+o),o++;$("#subtopic-1").val("General"),counter_subtopics=3,console.log(t),console.log("success")},error:function(t,e,o){console.log(t.status+": "+t.responseText)}})}function getCookie(t){var e=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var i=jQuery.trim(o[n]);if(i.substring(0,t.length+1)==t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e}function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}function sameOrigin(t){var e=document.location.host,o=document.location.protocol,n="//"+e,i=o+n;return t==i||t.slice(0,i.length+1)==i+"/"||t==n||t.slice(0,n.length+1)==n+"/"||!/^(\/\/|http:|https:).*/.test(t)}var counter_subtopics=3,limit_subtopics=30,table=document.getElementById("committees-table").getElementsByTagName("tbody")[0];Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var t=this.length-1;t>=0;t--)this[t]&&this[t].parentElement&&this[t].parentElement.removeChild(this[t])},$("#committee-form").on("submit",function(t){t.preventDefault(),console.log("form submitted!"),submit_committee()});var csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(t,e){!csrfSafeMethod(e.type)&&sameOrigin(e.url)&&t.setRequestHeader("X-CSRFToken",csrftoken)}});