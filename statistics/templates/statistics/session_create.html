{% extends 'statistics/base.html' %}

{% load staticfiles %}
{% load form_extras %}

{% block page_title %}Create Session{% endblock %}

{% block content %}
    </div>
    <div class="welcome-jumbo jumbotron">
        <div class="container">
            <h1>Create your GA Statistics Session</h1>
            <p>Not sure which statistics type to pick? Head over to <a style="color: #FFD700" href="{% url 'statistics:get_started' %}">get started</a> and take a look.</p>
        </div><!--/.container -->
    </div><!--/.jumbotron -->
    <br>
    <div class="container">
    {% if messages %}
        <br>
        <br>
        {% for message in messages %}
            <div class="alert alert-dismissable alert-success shadow-z-2">
                <p {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
            </div>
        {% endfor %}
        <script type="text/javascript">
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 5000);
        </script>
    {% endif %}

    <div class="well well-lg">
        <legend>Create Session:</legend>
        <form id="create-session" class="form-horizontal" enctype="multipart/form-data" role="form" action="{% url 'statistics:create_session' %}" method="post">
            <fieldset>
                {% csrf_token %}
                {% for field in form %}
                    <div class="form-group {% if field.errors %}has-error{% endif %}">
                        <label class="control-label col-sm-2" for="{{ field.id_for_label }}">{{ field.label }} {{ field.errors }}</label>
                        <div class="col-sm-10">
                            {% if field.field.widget|klass == "CheckboxInput" %}
                                <div class="togglebutton">
                                    <label>
                                        {{ field }} {{ field.label }}
                                    </label>
                                </div>
                            {% else %}
                                 {% if field.field.widget|klass == "FileInput" %}
                                     <input type="text" readonly="" class="form-control" placeholder="Browse...">
                                 {% endif %}
                                {{ field }}
                            {% endif %}

                        </div>
                    </div>
                {% endfor %}
                <div class="form-group">
                    <div class="col-md-10 col-md-offset-2">
                        <button type="submit" class="btn btn-primary btn-raised">Create Session</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
{% endblock %}

{% block footer_scripts %}
    <script>

        $('#id_start_date').bootstrapMaterialDatePicker({ weekStart : 0, time: false });
        $('#id_end_date').bootstrapMaterialDatePicker({ weekStart : 0, time: false });

    </script>
{% endblock %}
