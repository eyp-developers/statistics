{% extends 'statistics/base.html' %}

{% load staticfiles %}

{% block page_title %}{{ session.session_name }}{% endblock %}

{% block content %}
</div>
<div class="container-fluid top-header" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('{{ session.session_picture }}') no-repeat center/cover;">
<h1 class="session-name">{{ session.session_name }}</h1>
<h3 class="session-description">{{ session.session_description }}</h3>

{% if session.session_website_link or session.session_resolution_link or session.session_facebook_link or session.session_twitter_link %}

<div class="row">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-1">

    {% if session.session_website_link %}
    <a class="btn btn-sm btn-material-{{ session.session_color }}-400" href="{{ session.session_website_link }}">{{ session.session_name }}'s Website</a>
    {% endif %}

    {% if session.session_resolution_link %}
    <a class="btn btn-sm btn-material-{{ session.session_color }}-400" href="{{ session.session_website_link }}">View Resolutions</a>
    {% endif %}

    {% if session.session_facebook_link %}
    <a class="btn btn-sm btn-material-{{ session.session_color }}-400" href="{{ session.session_website_link }}">{{ session.session_name }} on Facebook</a>
    {% endif %}

    {% if session.session_twitter_link %}
    <a class="btn btn-sm btn-material-{{ session.session_color }}-400" href="{{ session.session_website_link }}">{{ session.session_name }} on Twitter</a>
    {% endif %}
  </div>
</div>

{% endif %}

</div>
<div class="container">

{% if session_committee_list %}
      <h1>
        Debates:
      </h1>
      <div class="debates row" >
        {% for committee in session_committee_list %}
          <div class="debate-box col-md-4">
            <h2>
              <a href="{% url 'statistics:debate' committee.session.id committee.id %}" class="btn btn-primary btn-material-{{ session.session_color }}-800">{{ committee.committee_name }}</a>
            </h2>
            <p>
              {{ committee.committee_topic }}
            </p>
          </div>
          {% cycle "" "" "</div><div class='row'>" %} <!-- this ends the row after every third committee, thus ensuring that they are all properly aligned -->
        {% endfor %}
    </div>
{% else %}
      <h2>No committees are available yet!</h2>
{% endif %}

<h2>Points Made Summary</h2>
<div id="points" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

{% if voting_enabled %}
<script>
var voting_enabled = true;
var voting_url = '{% url 'statistics:session_vote_api' session_id %}';

</script>
<h2>Voting Summary</h2>
<div id="votes" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
{% else %}
<script> var voting_enabled = false; </script>
{% endif %}

<script type="text/javascript">
  var session = {{ session_id }};
  var session_url = '{% url 'statistics:session_api' session_id %}';
</script>

{% endblock %}

{% block footer_scripts %}
<script  type="text/javascript" src="{% static 'statistics/js/session.js' %}"></script>
{% if voting_enabled %}
<script  type="text/javascript" src="{% static 'statistics/js/session_vote.js' %}"></script>
{% endif %}
{% endblock %}
