{% extends 'statistics/base.html' %}

{% load staticfiles %}

{% block page_title %}Home{% endblock %}

{% block jumbotron %}

    <div class="container-fluid no-padding">
        <div id='stats-home-map'></div>
    </div><!--/.container-fluid -->
    <div class="container-fluid no-padding">
        <div class="jumbotron">
            <div class="container">
                <p class="home-jumbo-p">GA Statistics is a project of the European Youth Parliament that gathers statistics about General Assemblies all across Europe.</p>
            </div><!--/.container -->
        </div><!--/.jumbotron -->
     </div><!--/.container-fluid -->

{% endblock %}

{% block content %}
    {% if active_sessions %}
      {% for session in active_sessions %}
        <div class="alert alert-dismissable alert-info">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <h4 style="margin-top: 6px;"><span class="mdi-social-whatshot"></span>   <strong><a href="{% url 'statistics:session' session.pk %}" class="alert-link">{{session.session_name}}</a></strong>'s GA is happening right now!</h4>
        </div>
      {% endfor %}
    {% endif %}
    {% if latest_sessions_list %}
      {% for session in latest_sessions_list %}
        <div class="home-header" style="background:  url('{{ session.session_picture.url }}') no-repeat center/cover;">
          <a href="{% url 'statistics:session' session.pk %}" class="no-decoration white white-on-hover">
            <h1 class="session-name-btn heavy-font-weight">{{ session.session_name }}</h1>
            <h3 class="session-name-btn session-description-btn hidden-sm hidden-xs">{{ session.session_description }}</h3>
          </a><!--/.Link Element on top of the picture -->
            <span class="session-type" style="background-color: {% if session.session_type == 'RS' %}#618ECA{% elif session.session_type == 'NS' %}#558B2F{% elif session.session_type == 'IF' %}#253746{% elif session.session_type == 'IS' %}#FF5722{% endif %};">{{ session.session_type }}</span>
        </div><!--/.home-header well well-lg -->
    {% endfor %}

    <div class="container row">
        {% if latest_sessions_list.has_previous %}
          <a class="btn btn-primary btn-raised col-sm-4" href="?page={{ latest_sessions_list.previous_page_number }}">More recent events</a>
        {% endif %}
        {% if latest_sessions_list.has_next %}
          <a class="btn btn-primary btn-raised col-sm-4 pull-right" href="?page={{ latest_sessions_list.next_page_number }}">Older events</a>
        {% endif %}
    </div>

    {% else %}
      <p>No sessions are available.</p>
    {% endif %}

{% endblock %} {% block footer_scripts %}
    <script type="text/javascript">
        var localNames = [];
        {% for local in local_names %}
            localNames.push('{{ local }}');
        {% endfor %}
        var countryNames = [];
        {% for country in country_names %}
            countryNames.push('{{ country }}');
        {% endfor %}
        var fullNames = [];
        {% for name in full_names %}
            fullNames.push('{{ name }}');
        {% endfor %}
        var sessionDescriptions = [];
        {% for session in marker_sessions %}
            sessionDescriptions.push('<a href{% url 'statistics:session' session.pk %}>{{ session.session_start_date|date:"D, j N Y" }} – {{ session.session_end_date|date:"D, j N Y" }}</a>');
        {% endfor %}
    </script>
    <script src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAqeZX0P0RQThTyQdh9EyJsT34tdPV1ago&extension=.js'></script>
    <script  type="text/javascript" src="{% static 'statistics/js/home.js' %}"></script>
 {% endblock %}
